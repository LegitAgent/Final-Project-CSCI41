{% load static %}

<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet" />

    <link href="{% static 'plugins/global/plugins.bundle.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'css/style.bundle.css' %}" rel="stylesheet" type="text/css" />
    <link href="{% static 'css/custom.css' %}" rel="stylesheet" type="text/css" />
    <link rel="icon" type="image/x-icon" href="{% static 'media/favicon.ico' %}" />

    <!-- Additional Stylesheets -->
    {% block styles %}{% endblock %}

    <title>Central Bookings {% block title %}{% endblock %}</title>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const navLinks = document.getElementsByClassName("nav-link");
        const linkHover = document.querySelector("span.nav-hover-pill");
        const activeLink = document.querySelector("a.nav-link.active");
        
        if (window.location.pathname != "/") {
          linkHover.style.border = "solid 1px";
          linkHover.style.width = `${activeLink.clientWidth}px`;
          linkHover.style.transform = `translateX(${activeLink.offsetLeft}px)`;
        } else {
          linkHover.style.width = "0";
          linkHover.style.border = "none";
        }

        for (let el of navLinks) {
          el.addEventListener("mouseover", () => {
            linkHover.style.border = "solid 1px";
            linkHover.style.width = `${el.clientWidth}px`;
            linkHover.style.transform = `translateX(${el.offsetLeft}px)`;
          });
          el.addEventListener("mouseleave", () => {
            if (window.location.pathname != "/") {
              linkHover.style.border = "solid 1px";
              linkHover.style.width = `${activeLink.clientWidth}px`;
              linkHover.style.transform = `translateX(${activeLink.offsetLeft}px)`;
            } else {
              linkHover.style.width = "0";
              linkHover.style.border = "none";
            }
          }); 
        }
      });
    </script>
  </head>

  <body>
    <nav class="d-flex bg-white ps-4 pe-md-12 pe-6 align-items-center justify-content-between w-100 z-index-2" style="height: 72px;">
      <!-- Left of Nav -->
      <div class="d-flex flex-row w-100 align-items-center">
        <a class="d-flex gap-3 h-40px align-items-center" href="/">
          <h2 class="m-0">&#128214;</h2>
          <span class="fw-bolder fs-1 text-gray-800 text-hover-primary" style="font-family: 'Rubik';">Central Bookings</span>
        </a>
        <div class="d-flex flex-row flex-grow-1 fs-6 fw-semibold ms-6 position-relative">
          <a class="nav-link px-4 py-2 {% if "/organizers" in request.path %}active{% endif %}" href="#">Organizers</a>
          <a class="nav-link px-4 py-2 {% if "/activities" in request.path %}active{% endif %}" href="/activities">Activities</a>
          <a class="nav-link px-4 py-2 {% if "/bookings" in request.path %}active{% endif %}" href="#">Bookings</a>
          <span class="nav-hover-pill bg-gray-100 border-gray-200 h-100 start-0 position-absolute h-100 z-index-n1 rounded-pill"></span>
        </div>
      </div>

      <!-- Right of Nav -->
      <div class="d-flex flex-row gap-3">
        {% if request.user.is_authenticated %}
          <div class="d-flex flex-row align-items-center gap-3" data-kt-menu-trigger="{default:'click', lg:'hover'}" data-kt-menu-placement="bottom" data-kt-menu-offset="0,20">
            <div class="w-40px h-40px d-flex align-items-center justify-content-center rounded-circle bg-gray-300">
              <span class="fs-2 fw-semibold text-gray-700 text-center">{{ user.name|slice:"0:1" }}</span>
            </div>
            <div class="d-flex flex-column">
              <span class="text-gray-600 fw-semibold fs-7">Welcome back,</span>
              <span class="text-gray-800 fs-5 fw-bold d-flex align-items-center text-nowrap">
                {{ user.name }}
              </span>
            </div>
            <i class="fs-1 text-gray-600 ki-solid ki-down hover-rotate-180"></i>
          </div>
          <div class="menu menu-sub menu-sub-dropdown menu-gray-700 menu-hover-primary menu-hover-bg menu-rounded fw-semibold p-3 w-150px" data-kt-menu="true">
            <div class="menu-item">
              <form method="POST" action="{% url 'logout' %}" class="d-flex m-0">
                {% csrf_token %}
                <button class="menu-link" type="submit">
                  <span class="menu-icon">
                    <i class="ki-duotone ki-exit-right fs-2">
                    <span class="path1"></span>
                    <span class="path2"></span>
                    </i>
                  </span>
                  <span class="menu-title">Logout</span>
                </button>
              </form>
            </div>
          </div>
        {% else %}
          <a href="#" class="btn btn-icon btn-color-gray-600 btn-active-light btn-active-color-dark" data-kt-menu-trigger="hover" data-kt-menu-placement="bottom-end" data-kt-menu-offset="0,20">
            <svg width="20px" height="24px" viewBox="0 0 20 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M1.92569 9.57353C1.205 9.45427 -0.185013 9.78819 0.0205052 12.0779C0.53427 13.67 1.63857 13.9609 2.12651 13.9073C2.26909 13.8848 2.54478 14.2321 2.77912 14.6619C3.37049 15.7466 4.91648 16.7556 6.69373 17.0832C6.9186 17.1246 7.39756 17.2265 6.84002 17.9452C6.3488 18.6576 5.32782 20.4169 5.17367 21.7546C4.98099 23.4266 5.64165 23.7518 6.24084 23.9995H13.9333C14.4223 24.0189 15.229 23.4828 14.5443 21.1832C13.8637 19.1159 13.2323 17.9823 13.0016 17.6739C12.8525 17.4803 12.7539 17.0582 13.5527 16.9182C14.5512 16.7431 16.8538 15.8773 17.3625 14.3575C17.566 13.8984 17.8847 13.8474 17.9628 13.8474C18.3381 13.8474 19.6955 13.3196 19.99 11.6127C20.0489 11.0088 19.8747 9.7746 18.7074 9.66814H18.018C18.018 9.66814 18.185 8.03467 17.9628 6.5845C16.6181 -2.19484 3.2972 -2.19483 2.12651 6.5845C1.91534 8.16806 1.92569 9.57353 1.92569 9.57353ZM15.1895 4.60677C15.4446 4.30392 15.4164 3.84238 15.1265 3.57588C14.8366 3.30939 14.3947 3.33885 14.1396 3.64169L12.8101 5.21988L11.6448 3.67262C11.5186 3.50505 11.3287 3.40344 11.1247 3.39445C10.9208 3.38546 10.7233 3.46998 10.584 3.62584L9.14172 5.24006L7.96126 3.67261C7.83217 3.50121 7.63651 3.39902 7.42779 3.39399C7.21906 3.38897 7.0191 3.48163 6.88259 3.64664L4.88382 6.06267C4.63131 6.36789 4.66348 6.82915 4.95569 7.09292C5.24789 7.35668 5.68947 7.32307 5.94198 7.01785L7.38634 5.27196L8.54683 6.81289C8.67302 6.98046 8.86301 7.08206 9.06693 7.09105C9.27085 7.10005 9.46835 7.01552 9.60762 6.85966L11.0499 5.24545L12.2304 6.81289C12.3588 6.98339 12.5531 7.08545 12.7607 7.09143C12.9683 7.0974 13.1677 7.00668 13.3049 6.84382L15.1895 4.60677ZM6.71024 11.0524C7.34528 11.0524 7.86009 10.5169 7.86009 9.85641C7.86009 9.19587 7.34528 8.66039 6.71024 8.66039C6.0752 8.66039 5.56039 9.19587 5.56039 9.85641C5.56039 10.5169 6.0752 11.0524 6.71024 11.0524ZM13.2897 11.0524C13.9247 11.0524 14.4395 10.517 14.4395 9.85642C14.4395 9.19587 13.9247 8.66039 13.2897 8.66039C12.6546 8.66039 12.1398 9.19587 12.1398 9.85642C12.1398 10.517 12.6546 11.0524 13.2897 11.0524ZM12.1504 12.1174C12.5405 12.2011 12.7917 12.5992 12.7116 13.0066C12.5541 13.8076 12.1344 14.395 11.5708 14.7522C11.0246 15.0983 10.3889 15.201 9.80656 15.1467C9.22486 15.0925 8.64225 14.8774 8.18139 14.517C7.7183 14.1548 7.33536 13.6062 7.2929 12.9025C7.26786 12.4874 7.56971 12.1297 7.9671 12.1035C8.36449 12.0773 8.70694 12.3926 8.73198 12.8077C8.74112 12.9591 8.82409 13.1381 9.0456 13.3113C9.26933 13.4863 9.59 13.6144 9.93463 13.6465C10.2787 13.6785 10.5924 13.6105 10.8229 13.4644C11.0361 13.3293 11.2206 13.1029 11.2991 12.7036C11.3793 12.2961 11.7604 12.0337 12.1504 12.1174Z" fill="currentColor" />
            </svg>
          </a>
          <div class="menu menu-sub menu-sub-dropdown menu-gray-700 menu-hover-primary menu-hover-bg menu-rounded fw-semibold p-3 w-150px" data-kt-menu="true">
            <div class="menu-item">
              <a href="/accounts/login" class="menu-link">
                <span class="menu-icon">
                  <i class="ki-duotone ki-exit-right fs-2">
                  <span class="path1"></span>
                  <span class="path2"></span>
                  </i>
                </span>
                <span class="menu-title">Login</span>
              </a>
            </div>
            <div class="menu-item">
              <a href="/accounts/register" class="menu-link">
                <span class="menu-icon">
                  <i class="ki-duotone ki-exit-right fs-2">
                  <span class="path1"></span>
                  <span class="path2"></span>
                  </i>
                </span>
                <span class="menu-title">Register</span>
              </a>
            </div>
          </div>
        {% endif %}
      </div>
    </nav>

    {% block content %}

    {% endblock %}

    <!-- Global Javascript Bundles -->
    <script src="{% static 'plugins/global/plugins.bundle.js' %}"></script>
    <script src="{% static 'js/scripts.bundle.js' %}"></script>

    <!-- Additional Javascript -->
    {% block scripts %}{% endblock %}
  </body>
</html>
